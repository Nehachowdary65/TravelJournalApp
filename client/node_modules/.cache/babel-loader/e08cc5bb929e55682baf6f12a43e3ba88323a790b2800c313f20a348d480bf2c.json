{"ast":null,"code":"import _objectSpread from\"C:/Users/Neha/Documents/Travel journal app/client/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";// client/src/pages/Create.jsx\nimport React,{useContext,useState}from'react';import axios from\"axios\";import{AuthContext}from'../authContext';import\"../styles/create.css\";import{useNavigate}from'react-router-dom';import Navbar from'../components/Navbar';import{faPlusCircle}from\"@fortawesome/free-solid-svg-icons\";import{FontAwesomeIcon}from\"@fortawesome/react-fontawesome\";import\"../styles/create.css\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const Create=()=>{const navigate=useNavigate();const{user}=useContext(AuthContext);const[files,setFiles]=useState(\"\");const[info,setInfo]=useState({});// set the usestate to the data user passed \nconst handleChange=e=>{setInfo(prev=>_objectSpread(_objectSpread({},prev),{},{[e.target.id]:e.target.value}));};// post the usestate to database\nconst handleClick=async e=>{e.preventDefault();var newEntry;if(files){const list=await Promise.all(Object.values(files).map(async file=>{const data=new FormData();data.append(\"file\",file);data.append(\"upload_preset\",\"upload\");const uploadRes=await axios.post(\"https://api.cloudinary.com/v1_1/dmxzcafrn/image/upload\",data,{withcredentials:false});const{url}=uploadRes.data;return url;}));newEntry=_objectSpread(_objectSpread({},info),{},{author:user._id,photos:list});}else{newEntry=_objectSpread(_objectSpread({},info),{},{author:user._id});}try{var _response$data;const response=await axios.post('http://localhost:5500/api/entries/',newEntry,{withCredentials:false});navigate(\"/view/\".concat(response===null||response===void 0?void 0:(_response$data=response.data)===null||_response$data===void 0?void 0:_response$data._id));}catch(err){console.log(err);}};return/*#__PURE__*/_jsxs(\"div\",{className:\"create\",children:[/*#__PURE__*/_jsx(Navbar,{}),/*#__PURE__*/_jsxs(\"div\",{className:\"createContainer\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"picsContainer\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"formInput\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Upload Images (Max 3)\"}),/*#__PURE__*/_jsx(\"label\",{htmlFor:\"file\",children:/*#__PURE__*/_jsx(FontAwesomeIcon,{className:\"icon\",icon:faPlusCircle})}),/*#__PURE__*/_jsx(\"input\",{type:\"file\",id:\"file\",multiple:true,onChange:e=>setFiles(e.target.files),style:{display:\"none\"}})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"uploadedPictures\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"upload_pic\",children:/*#__PURE__*/_jsx(\"img\",{src:files[0]?URL.createObjectURL(files[0]):\"\",alt:\"\",height:\"80px\"})}),/*#__PURE__*/_jsx(\"div\",{className:\"upload_pic\",children:/*#__PURE__*/_jsx(\"img\",{src:files[1]?URL.createObjectURL(files[1]):\"\",alt:\"\",height:\"80px\"})}),/*#__PURE__*/_jsx(\"div\",{className:\"upload_pic\",children:/*#__PURE__*/_jsx(\"img\",{src:files[2]?URL.createObjectURL(files[2]):\"\",alt:\"\",height:\"80px\"})})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"input\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"title\",children:\"Title\"}),/*#__PURE__*/_jsx(\"input\",{onChange:handleChange,type:\"text\",id:\"title\",placeholder:\"Enter Title\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"input\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"title\",children:\"Location\"}),/*#__PURE__*/_jsx(\"input\",{onChange:handleChange,type:\"text\",id:\"location\",placeholder:\"Enter Location\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"input\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"date\",children:\"What is the Date\"}),/*#__PURE__*/_jsx(\"input\",{onChange:handleChange,type:\"date\",id:\"date\",placeholder:\"Choose Date\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"input\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"entry\",children:\"Write your thoughts..\"}),/*#__PURE__*/_jsx(\"textarea\",{name:\"entry\",id:\"text\",cols:\"150\",rows:\"25\",onChange:handleChange,autoFocus:true})]}),/*#__PURE__*/_jsx(\"button\",{className:\"createBtn\",onClick:handleClick,children:\"Create Entry\"})]})]});};export default Create;","map":{"version":3,"names":["React","useContext","useState","axios","AuthContext","useNavigate","Navbar","faPlusCircle","FontAwesomeIcon","jsx","_jsx","jsxs","_jsxs","Create","navigate","user","files","setFiles","info","setInfo","handleChange","e","prev","_objectSpread","target","id","value","handleClick","preventDefault","newEntry","list","Promise","all","Object","values","map","file","data","FormData","append","uploadRes","post","withcredentials","url","author","_id","photos","_response$data","response","withCredentials","concat","err","console","log","className","children","htmlFor","icon","type","multiple","onChange","style","display","src","URL","createObjectURL","alt","height","placeholder","name","cols","rows","autoFocus","onClick"],"sources":["C:/Users/Neha/Documents/Travel journal app/client/src/pages/Create.jsx"],"sourcesContent":["// client/src/pages/Create.jsx\r\n\r\nimport React, { useContext, useState } from 'react'\r\nimport axios from \"axios\"\r\nimport { AuthContext } from '../authContext';\r\nimport \"../styles/create.css\"\r\nimport { useNavigate } from 'react-router-dom';\r\nimport Navbar from '../components/Navbar';\r\nimport { faPlusCircle } from \"@fortawesome/free-solid-svg-icons\";\r\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\r\nimport \"../styles/create.css\"\r\n\r\nconst Create = () => {\r\n    const navigate = useNavigate();\r\n    const { user } = useContext(AuthContext);\r\n    const [files, setFiles] = useState(\"\");\r\n    const [info, setInfo] = useState({});\r\n\r\n    // set the usestate to the data user passed \r\n    const handleChange = (e) => {\r\n        setInfo((prev) => ({ ...prev, [e.target.id]: e.target.value }));\r\n    }\r\n\r\n    // post the usestate to database\r\n    const handleClick = async (e) => {\r\n        e.preventDefault();\r\n\r\n        var newEntry\r\n\r\n        if (files) {\r\n            const list = await Promise.all(Object.values(files).map(async (file) => {\r\n                const data = new FormData();\r\n                data.append(\"file\", file);\r\n                data.append(\"upload_preset\", \"upload\")\r\n                const uploadRes = await axios.post(\r\n                    \"https://api.cloudinary.com/v1_1/dmxzcafrn/image/upload\",\r\n                    data, { withcredentials: false }\r\n                )\r\n                const { url } = uploadRes.data;\r\n                return url;\r\n            }))\r\n\r\n\r\n            newEntry = {\r\n                ...info, author: user._id, photos: list\r\n            }\r\n\r\n        }\r\n        else {\r\n            newEntry = {\r\n                ...info, author: user._id\r\n            }\r\n        }\r\n\r\n\r\n        try {\r\n            const response = await axios.post('http://localhost:5500/api/entries/',\r\n                newEntry, {\r\n                withCredentials: false\r\n            })\r\n\r\n            navigate(`/view/${response?.data?._id}`);\r\n        }\r\n        catch (err) {\r\n            console.log(err)\r\n        }\r\n    }\r\n\r\n    return (\r\n        <div className='create'>\r\n            <Navbar />\r\n            <div className=\"createContainer\">\r\n\r\n                <div className=\"picsContainer\">\r\n\r\n                    <div className=\"formInput\">\r\n                        <h2>Upload Images (Max 3)</h2>\r\n                        <label htmlFor=\"file\">\r\n                            <FontAwesomeIcon\r\n                                className=\"icon\" icon={faPlusCircle} />\r\n                        </label>\r\n                        <input\r\n                            type=\"file\"\r\n                            id=\"file\"\r\n                            multiple\r\n                            onChange={(e) => setFiles(e.target.files)}\r\n                            style={{ display: \"none\" }}\r\n                        />\r\n                    </div>\r\n                    <div className=\"uploadedPictures\">\r\n                        <div className=\"upload_pic\">\r\n                            <img\r\n                                src={\r\n                                    files[0]\r\n                                        ? URL.createObjectURL(files[0])\r\n                                        : \"\"\r\n                                }\r\n                                alt=\"\"\r\n                                height=\"80px\"\r\n                            />\r\n                        </div>\r\n                        <div className=\"upload_pic\">\r\n                            <img\r\n                                src={\r\n                                    files[1]\r\n                                        ? URL.createObjectURL(files[1])\r\n                                        : \"\"\r\n                                }\r\n                                alt=\"\"\r\n                                height=\"80px\"\r\n                            />\r\n                        </div>\r\n                        <div className=\"upload_pic\">\r\n                            <img\r\n                                src={\r\n                                    files[2]\r\n                                        ? URL.createObjectURL(files[2])\r\n                                        : \"\"\r\n                                }\r\n                                alt=\"\"\r\n                                height=\"80px\"\r\n                            />\r\n                        </div>\r\n                    </div>\r\n\r\n                </div>\r\n\r\n                <div className=\"input\">\r\n                    <label htmlFor=\"title\">Title</label>\r\n                    <input\r\n                        onChange={handleChange}\r\n                        type=\"text\"\r\n                        id=\"title\"\r\n                        placeholder=\"Enter Title\"\r\n                    />\r\n                </div>\r\n                <div className=\"input\">\r\n                    <label htmlFor=\"title\">\r\n                        Location\r\n                    </label>\r\n                    <input\r\n                        onChange={handleChange}\r\n                        type=\"text\"\r\n                        id=\"location\"\r\n                        placeholder=\"Enter Location\"\r\n                    />\r\n                </div>\r\n\r\n                <div className=\"input\">\r\n                    <label htmlFor=\"date\">\r\n                        What is the Date\r\n                    </label>\r\n                    <input\r\n                        onChange={handleChange}\r\n                        type=\"date\"\r\n                        id=\"date\"\r\n                        placeholder=\"Choose Date\"\r\n                    />\r\n                </div>\r\n\r\n                <div className=\"input\">\r\n                    <label htmlFor=\"entry\">\r\n                        Write your thoughts..\r\n                    </label>\r\n                    <textarea\r\n                        name='entry'\r\n                        id='text'\r\n                        cols=\"150\"\r\n                        rows='25'\r\n                        onChange={handleChange}\r\n                        autoFocus\r\n                    ></textarea>\r\n                </div>\r\n\r\n                <button className='createBtn'\r\n                    onClick={handleClick}>\r\n                    Create Entry\r\n                </button>\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default Create"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}